<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Golf Pro Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <!-- PWA Meta -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#1b5e20">
  <link rel="icon" sizes="192x192" href="https://cdn-icons-png.flaticon.com/512/1099/1099680.png">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/1099/1099680.png">

  <link rel="manifest" href="manifest.json">

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      padding: env(safe-area-inset-top) 12px 20px 12px;
      background: linear-gradient(135deg, #eef2f3 0%, #8bc34a 100%);
      min-height: 100vh;
      color: #1a1a1a;
    }

    .container {
      max-width: 700px;
      margin: 0 auto;
    }

    .card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      padding: 20px;
      margin-bottom: 20px;
    }

    .header {
      text-align: center;
      color: #1b5e20;
      font-size: 1.8em;
      font-weight: bold;
      margin-bottom: 20px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .round-info {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr;
      gap: 10px;
      margin-bottom: 20px;
    }

    .input-group {
      display: flex;
      flex-direction: column;
    }

    .input-group label {
      font-size: 0.85em;
      color: #555;
      margin-bottom: 5px;
      font-weight: 600;
    }

    .input-field {
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 14px;
      transition: all 0.3s ease;
      background: #fff;
    }

    .input-field:focus {
      border-color: #1b5e20;
      outline: none;
      box-shadow: 0 0 0 3px rgba(27,94,32,0.1);
    }

    .table-container {
      overflow-x: auto;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
      font-size: 13px;
    }

    th {
      background: linear-gradient(135deg, #1b5e20, #2e7d32);
      color: white;
      padding: 15px 8px;
      font-weight: 600;
      text-align: center;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    td {
      padding: 12px 8px;
      text-align: center;
      border-bottom: 1px solid #f0f0f0;
    }

    tbody tr:nth-child(even) {
      background-color: #f8fffe;
    }

    tbody tr:hover {
      background-color: #e8f5e9;
    }

    .btn {
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .btn-par {
      background: linear-gradient(135deg, #4caf50, #66bb6a);
      color: white;
      padding: 8px;
      width: 40px;
      height: 40px;
    }

    .btn-par:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 12px rgba(76,175,80,0.3);
    }

    .btn-toggle {
      background: linear-gradient(135deg, #fff, #f5f5f5);
      border: 2px solid #ddd;
      color: #333;
      padding: 8px;
      width: 50px;
      height: 40px;
      font-size: 16px;
    }

    .btn-toggle:hover {
      border-color: #1b5e20;
      transform: scale(1.05);
    }

    .input-score {
      width: 60px;
      padding: 8px;
      border: 2px solid #ddd;
      border-radius: 6px;
      text-align: center;
      font-size: 14px;
      font-weight: bold;
    }

    .input-score:focus {
      border-color: #1b5e20;
      outline: none;
    }

    .action-buttons {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-bottom: 20px;
    }

    .btn-action {
      padding: 15px;
      font-size: 16px;
      border-radius: 12px;
      color: white;
      font-weight: bold;
      transition: all 0.3s ease;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .btn-action:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    }

    .btn-analyze { background: linear-gradient(135deg, #1b5e20, #2e7d32); }
    .btn-save    { background: linear-gradient(135deg, #2196f3, #1976d2); }
    .btn-reset   { background: linear-gradient(135deg, #f44336, #d32f2f); }

    .stats-panel {
      display: none;
      background: linear-gradient(135deg, #fff, #f8f9fa);
      border: 3px solid #1b5e20;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .stats-title {
      color: #1b5e20;
      font-size: 1.3em;
      font-weight: bold;
      text-align: center;
      margin-bottom: 20px;
    }

    .stat-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 2px dashed #e0e0e0;
      font-size: 14px;
    }

    .stat-row:last-child {
      border-bottom: none;
    }

    .stat-label {
      font-weight: 600;
      color: #333;
    }

    .stat-value {
      font-weight: 700;
      color: #1b5e20;
    }

    .gross-score {
      font-size: 1.5em !important;
      color: #f44336 !important;
    }

    .btn-copy {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #ff9800, #f57c00);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: bold;
      margin-top: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .btn-copy:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(255,152,0,0.3);
    }

    .saved-rounds {
      max-height: 300px;
      overflow-y: auto;
    }

    .round-item {
      background: #f8f9fa;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 10px;
      border-left: 4px solid #1b5e20;
    }

    .round-summary {
      background: #e8f5e9;
      padding: 10px;
      border-radius: 8px;
      margin-top: 10px;
      font-size: 0.9em;
      white-space: pre-line;
    }

    .empty-state {
      text-align: center;
      color: #999;
      padding: 20px;
      font-style: italic;
    }

    @media (max-width: 600px) {
      .round-info {
        grid-template-columns: 1fr;
        gap: 8px;
      }
      .action-buttons {
        grid-template-columns: 1fr;
        gap: 10px;
      }
      table { font-size: 11px; }
      th, td { padding: 8px 4px; }
      .btn-par, .btn-toggle { width: 35px; height: 35px; }
      .input-score { width: 45px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- ‡∏£‡∏≠‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô -->
    <div class="card">
      <div class="header">Golf Pro Tracker üèåÔ∏è‚Äç‚ôÇÔ∏è</div>

      <div class="round-info">
        <div class="input-group">
          <label>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ô‡∏≤‡∏° / ‡∏£‡∏≠‡∏ö</label>
          <input id="courseName" type="text" class="input-field" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏ô‡∏≤‡∏° A ‡πÄ‡∏ä‡πâ‡∏≤‡πÄ‡∏™‡∏≤‡∏£‡πå">
        </div>
        <div class="input-group">
          <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
          <input id="roundDate" type="date" class="input-field">
        </div>
        <div class="input-group">
          <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏•‡∏∏‡∏°</label>
          <select id="totalHoles" class="input-field">
            <option value="9">9 ‡∏´‡∏•‡∏∏‡∏°</option>
            <option value="18" selected>18 ‡∏´‡∏•‡∏∏‡∏°</option>
          </select>
        </div>
      </div>

      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Hole</th>
              <th>Par</th>
              <th>FIR</th>
              <th>Stroke</th>
              <th>GIR</th>
              <th>Putt</th>
            </tr>
          </thead>
          <tbody id="scoreTable"></tbody>
        </table>
      </div>

      <div class="action-buttons">
        <button class="btn-action btn-analyze" onclick="analyzeRound()">üìä ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</button>
        <button class="btn-action btn-save" onclick="saveRound()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≠‡∏ö</button>
        <button class="btn-action btn-reset" onclick="resetRound()">üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
      </div>
    </div>

    <!-- ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ -->
    <div class="card stats-panel" id="statsPanel">
      <div class="stats-title" id="statsTitle">üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</div>

      <div class="stat-row">
        <span class="stat-label">üèåÔ∏è Gross Score:</span>
        <span class="stat-value gross-score" id="grossScore">-</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">üéØ Fairway Hit:</span>
        <span class="stat-value" id="fairwayHit">-</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">üìç Miss Direction:</span>
        <span class="stat-value" id="missDirection">-</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">üü¢ GIR:</span>
        <span class="stat-value" id="girStats">-</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">‚õ≥ Total Putts:</span>
        <span class="stat-value" id="totalPutts">-</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">üßÆ ‡∏™‡∏Å‡∏≠‡∏£‡πå‡∏ï‡πà‡∏≠‡∏´‡∏•‡∏∏‡∏°:</span>
        <span class="stat-value" id="scoreBreakdown">-</span>
      </div>

      <button class="btn-copy" onclick="copyStats()">üìã Copy</button>
    </div>

    <!-- ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ -->
    <div class="card">
      <div class="header" style="font-size:1.3em;">üìà ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ</div>
      <div class="saved-rounds" id="savedRounds"></div>
    </div>
  </div>

  <script>
    // PWA: Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
          .then(() => console.log('SW registered'))
          .catch(err => console.log('SW register error', err));
      });
    }

    const STORAGE_KEY = 'golf_rounds_full_v1';
    const FIR_STATES = ['', '‚úÖ', '‚¨ÖÔ∏è', '‚û°Ô∏è', '‚ùå']; // ‡∏ß‡πà‡∏≤‡∏á, Hit, ‡∏ã‡πâ‡∏≤‡∏¢, ‡∏Ç‡∏ß‡∏≤, ‡∏û‡∏•‡∏≤‡∏î
    const GIR_STATES = ['', '‚ùå', '‚úÖ'];            // ‡∏ß‡πà‡∏≤‡∏á, ‡∏ú‡∏¥‡∏î, ‡∏ñ‡∏π‡∏Å

    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('roundDate').value = new Date().toISOString().slice(0,10);
      buildScoreTable(18);
      loadSavedRounds();

      document.getElementById('totalHoles').addEventListener('change', e => {
        buildScoreTable(parseInt(e.target.value, 10));
      });
    });

    function buildScoreTable(holes) {
      const tbody = document.getElementById('scoreTable');
      tbody.innerHTML = '';
      for (let i = 1; i <= holes; i++) {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td><strong>${i}</strong></td>
          <td><button class="btn btn-par" onclick="togglePar(this)">${i <= 2 || i >= 17 ? 3 : 4}</button></td>
          <td class="fir-cell" data-hole="${i}">-</td>
          <td><input type="number" class="input-score" data-type="stroke" data-hole="${i}" min="1" max="15"></td>
          <td><button class="btn btn-toggle" onclick="toggleGir(this)" data-hole="${i}">-</button></td>
          <td><input type="number" class="input-score" data-type="putt" data-hole="${i}" min="0" max="10"></td>
        `;
        tbody.appendChild(tr);
      }
      updateFirCells();
    }

    function updateFirCells() {
      document.querySelectorAll('.fir-cell').forEach(cell => {
        const parBtn = cell.parentElement.querySelector('.btn-par');
        const par = parseInt(parBtn.textContent, 10);
        if (par === 3) {
          cell.innerHTML = '-';
        } else {
          cell.innerHTML = '<button class="btn btn-toggle" onclick="toggleFir(this)">-</button>';
        }
      });
    }

    function togglePar(btn) {
      let par = parseInt(btn.textContent, 10);
      par = par >= 6 ? 3 : par + 1;
      btn.textContent = par;
      updateFirCells();
    }

    function toggleFir(btn) {
      const current = btn.textContent === '-' ? '' : btn.textContent;
      const idx = FIR_STATES.indexOf(current);
      const next = FIR_STATES[(idx + 1) % FIR_STATES.length];
      btn.textContent = next || '-';
    }

    function toggleGir(btn) {
      const current = btn.textContent === '-' ? '' : btn.textContent;
      const idx = GIR_STATES.indexOf(current);
      const next = GIR_STATES[(idx + 1) % GIR_STATES.length];
      btn.textContent = next || '-';
    }

    function collectRoundData() {
      const courseName = document.getElementById('courseName').value.trim();
      const date = document.getElementById('roundDate').value;
      const holes = parseInt(document.getElementById('totalHoles').value, 10);
      const holeData = [];

      document.querySelectorAll('#scoreTable tr').forEach((tr, index) => {
        const hole = index + 1;
        const parBtn = tr.querySelector('.btn-par');
        const strokeInput = tr.querySelector('input[data-type="stroke"]');
        const puttInput = tr.querySelector('input[data-type="putt"]');
        const firBtn = tr.querySelector('.fir-cell button');
        const girBtn = tr.querySelector('button.btn-toggle[data-hole]');

        const par = parseInt(parBtn.textContent, 10);
        const stroke = strokeInput.value ? parseInt(strokeInput.value, 10) : null;
        const putt = puttInput.value ? parseInt(puttInput.value, 10) : null;
        const fir = firBtn ? (firBtn.textContent === '-' ? '' : firBtn.textContent) : '';
        const gir = girBtn ? (girBtn.textContent === '-' ? '' : girBtn.textContent) : '';

        holeData.push({ hole, par, stroke, putt, fir, gir });
      });

      return {
        id: Date.now(),
        courseName: courseName || '‡∏£‡∏≠‡∏ö‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠',
        date: date || new Date().toISOString().slice(0,10),
        holes,
        holeData
      };
    }

    function calculateStats(round) {
      let totalStroke = 0;
      let totalPutt = 0;
      let fwHits = 0, totalFw = 0, L = 0, R = 0, X = 0;
      let girHits = 0;

      // ‡∏ô‡∏±‡∏ö‡∏™‡∏Å‡∏≠‡∏£‡πå‡∏ï‡πà‡∏≠‡∏´‡∏•‡∏∏‡∏°
      let eagle = 0, birdie = 0, parCount = 0, bogey = 0, doubleOrWorse = 0;

      round.holeData.forEach(h => {
        const par = h.par || 0;
        const stroke = h.stroke || 0;
        const putt = h.putt || 0;

        if (stroke) totalStroke += stroke;
        if (putt) totalPutt += putt;

        if (par > 3) {
          totalFw++;
          if (h.fir === '‚úÖ') fwHits++;
          else if (h.fir === '‚¨ÖÔ∏è') L++;
          else if (h.fir === '‚û°Ô∏è') R++;
          else if (h.fir === '‚ùå') X++;
        }

        if (h.gir === '‚úÖ') girHits++;

        if (par && stroke) {
          const diff = stroke - par;
          if (diff <= -2)      eagle++;
          else if (diff === -1) birdie++;
          else if (diff === 0)  parCount++;
          else if (diff === 1)  bogey++;
          else if (diff >= 2)   doubleOrWorse++;
        }
      });

      const fwPct  = totalFw ? Math.round((fwHits / totalFw) * 100)   : 0;
      const girPct = round.holes ? Math.round((girHits / round.holes) * 100) : 0;

      return {
        totalStroke,
        totalPutt,
        fwHits,
        totalFw,
        fwPct,
        L, R, X,
        girHits,
        girPct,
        eagle,
        birdie,
        parCount,
        bogey,
        doubleOrWorse
      };
    }

    function displayStats(stats, round) {
      document.getElementById('statsTitle').textContent =
        `üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•: ${round.courseName} (${round.date})`;

      document.getElementById('grossScore').textContent = stats.totalStroke;
      document.getElementById('fairwayHit').textContent =
        `${stats.fwHits}/${stats.totalFw} (${stats.fwPct}%)`;
      document.getElementById('missDirection').textContent =
        `‚¨ÖÔ∏è${stats.L} | ‚û°Ô∏è${stats.R} | ‚ùå${stats.X}`;
      document.getElementById('girStats').textContent =
        `${stats.girHits}/${round.holes} (${stats.girPct}%)`;
      document.getElementById('totalPutts').textContent = stats.totalPutt;

      const breakdown =
        `Eagle: ${stats.eagle} | Birdie: ${stats.birdie} | Par: ${stats.parCount} | ` +
        `Bogey: ${stats.bogey} | Double+: ${stats.doubleOrWorse}`;
      document.getElementById('scoreBreakdown').textContent = breakdown;

      document.getElementById('statsPanel').style.display = 'block';
      document.getElementById('statsPanel').scrollIntoView({ behavior: 'smooth' });
    }

    function analyzeRound() {
      const round = collectRoundData();
      const stats = calculateStats(round);
      displayStats(stats, round);
    }

    function saveRound() {
      const round = collectRoundData();
      const stats = calculateStats(round);

      let summary =
        `üèåÔ∏è ‡∏£‡∏≠‡∏ö: ${round.courseName}\n` +
        `üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${round.date}\n` +
        `‡∏´‡∏•‡∏∏‡∏°: ${round.holes}\n\n` +
        `üìä ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏´‡∏•‡∏∏‡∏°:\n`;

      round.holeData.forEach(h => {
        const firText =
          h.fir === '‚úÖ' ? 'Hit' :
          h.fir === '‚¨ÖÔ∏è' ? 'Left' :
          h.fir === '‚û°Ô∏è' ? 'Right' :
          h.fir === '‚ùå' ? 'Miss' : '-';

        const girText =
          h.gir === '‚úÖ' ? 'GIR' :
          h.gir === '‚ùå' ? 'Miss' : '-';

        summary +=
          `Hole ${h.hole}: Par ${h.par}, ` +
          `Stroke ${h.stroke ?? '-'}, ` +
          `FIR ${firText}, GIR ${girText}, ` +
          `Putt ${h.putt ?? '-'}\n`;
      });

      summary +=
        `\nüéØ ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏ß‡∏°:\n` +
        `Gross: ${stats.totalStroke}\n` +
        `FW Hit: ${stats.fwHits}/${stats.totalFw} (${stats.fwPct}%)\n` +
        `Miss: ‚¨ÖÔ∏è${stats.L} | ‚û°Ô∏è${stats.R} | ‚ùå${stats.X}\n` +
        `GIR: ${stats.girHits}/${round.holes} (${stats.girPct}%)\n` +
        `Putts: ${stats.totalPutts}\n` +
        `Score: Eagle ${stats.eagle} | Birdie ${stats.birdie} | Par ${stats.parCount} | ` +
        `Bogey ${stats.bogey} | Double+ ${stats.doubleOrWorse}`;

      round.summary = summary;

      const list = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      list.unshift(round);
      if (list.length > 50) list.length = 50;
      localStorage.setItem(STORAGE_KEY, JSON.stringify(list));

      loadSavedRounds();
      alert('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≠‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡πÅ‡∏•‡πâ‡∏ß');
    }

    function loadSavedRounds() {
      const list = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      const container = document.getElementById('savedRounds');

      if (!list.length) {
        container.innerHTML = '<div class="empty-state">üìã ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</div>';
        return;
      }

      container.innerHTML = list.map(r => {
        const total = r.holeData.reduce((sum, h) => sum + (h.stroke || 0), 0);
        return `
          <div class="round-item">
            <div style="display:flex;justify-content:space-between;margin-bottom:6px;">
              <strong>${r.courseName}</strong>
              <span>${r.date}</span>
            </div>
            <div>üèåÔ∏è ${r.holes} ‡∏´‡∏•‡∏∏‡∏° | üìä Total: ${total}</div>
            <div class="round-summary">${r.summary.replace(/\n/g, '<br>')}</div>
            <button
              style="margin-top:10px;padding:6px 12px;background:#f44336;color:#fff;border:none;border-radius:6px;font-size:12px;cursor:pointer;"
              onclick="deleteRound(${r.id})"
            >üóëÔ∏è ‡∏•‡∏ö</button>
          </div>
        `;
      }).join('');
    }

    function deleteRound(id) {
      if (!confirm('üóëÔ∏è ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≠‡∏ö‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) return;
      const list = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      const filtered = list.filter(r => r.id !== id);
      localStorage.setItem(STORAGE_KEY, JSON.stringify(filtered));
      loadSavedRounds();
    }

    function resetRound() {
      // popup ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
      if (!confirm('üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≠‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?')) return;

      document.getElementById('courseName').value = '';
      document.getElementById('roundDate').value = new Date().toISOString().slice(0,10);
      document.getElementById('totalHoles').value = 18;
      buildScoreTable(18);
      document.getElementById('statsPanel').style.display = 'none';

    }

    function copyStats() {
      const gross = document.getElementById('grossScore').textContent;
      const fw   = document.getElementById('fairwayHit').textContent;
      const miss = document.getElementById('missDirection').textContent;
      const gir  = document.getElementById('girStats').textContent;
      const putt = document.getElementById('totalPutts').textContent;
      const scoreBreak = document.getElementById('scoreBreakdown').textContent;

      const text =
        `üèåÔ∏è Golf Stats\n` +
        `Gross: ${gross}\n` +
        `FW: ${fw}\n` +
        `Miss: ${miss}\n` +
        `GIR: ${gir}\n` +
        `Putts: ${putt}\n` +
        `Score: ${scoreBreak}`;

      navigator.clipboard.writeText(text)
        .then(() => alert('üìã Copy ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!'))
        .catch(() => prompt('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏µ‡πâ:', text));
    }
  </script>
</body>
</html>
