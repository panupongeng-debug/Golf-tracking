
                        <!DOCTYPE html>
                        <html lang="en">
                        <head>
                            <meta charset="UTF-8">
                            <meta name="viewport" content="width=device-width, initial-scale=1.0">
							<style>
								body {
									background-color: white; /* Ensure the iframe has a white background */
								}

								
							</style>
                        </head>
                        <body>
                            <!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Golf Pro Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <!-- PWA Meta Tags -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#1b5e20">
  <link rel="icon" sizes="192x192" href="https://cdn-icons-png.flaticon.com/512/1099/1099680.png">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/1099/1099680.png">

  <!-- Manifest -->
  <link rel="manifest" href="manifest.json">

  <style>
    body {
      font-family: -apple-system, system-ui, BlinkMacSystemFont, sans-serif;
      padding: env(safe-area-inset-top) 10px 20px 10px;
      background: linear-gradient(135deg, #eef2f3, #cfd9df);
      margin: 0;
      color: #123026;
    }
    .card {
      background: rgba(255,255,255,0.95);
      padding: 15px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      backdrop-filter: blur(10px);
      max-width: 650px;
      margin: 10px auto;
    }
    h2 {
      text-align: center;
      color: #1b5e20;
      margin: 10px 0;
      font-weight: 700;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    th {
      background: #1b5e20;
      color: white;
      padding: 12px 4px;
      position: sticky;
      top: 0;
      z-index: 2;
      font-weight: 600;
    }
    td {
      border-bottom: 1px solid #eee;
      padding: 8px 4px;
      text-align: center;
      background: #fafafa;
    }
    tbody tr:nth-child(even) td {
      background: #f1f8e9;
    }
    .btn-par {
      background: linear-gradient(135deg, #f1f8e9, #e8f5e9);
      border: 2px solid #1b5e20;
      border-radius: 8px;
      padding: 8px;
      width: 42px;
      font-weight: bold;
      cursor: pointer;
      color: #1b5e20;
      transition: all 0.2s ease;
    }
    .btn-par:hover {
      background: linear-gradient(135deg, #c8e6c9, #a5d6a7);
      transform: scale(1.05);
    }
    .btn-fir, .btn-gir {
      background: linear-gradient(135deg, #fff, #f5f5f5);
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 6px;
      width: 50px;
      font-size: 16px;
      min-height: 40px;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .btn-fir:hover, .btn-gir:hover {
      background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
      transform: scale(1.05);
      border-color: #1b5e20;
    }
    .input-num {
      width: 50px;
      padding: 8px 4px;
      text-align: center;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      background: #fff;
      transition: all 0.2s ease;
    }
    .input-num:focus {
      border-color: #1b5e20;
      outline: none;
      box-shadow: 0 0 0 2px rgba(27,94,32,0.1);
    }
    .top-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 15px;
      align-items: center;
    }
    .top-row input, .top-row select {
      padding: 10px 12px;
      border-radius: 10px;
      border: 2px solid #e0e0e0;
      font-size: 14px;
      background: #fff;
      transition: all 0.2s ease;
    }
    .top-row input:focus, .top-row select:focus {
      border-color: #1b5e20;
      outline: none;
      box-shadow: 0 0 0 2px rgba(27,94,32,0.1);
    }
    .top-row input[type="text"] {
      flex: 1;
      min-width: 140px;
    }

    .action-btns {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-top: 20px;
    }
    .btn-main {
      padding: 15px;
      border: none;
      border-radius: 12px;
      font-size: 14px;
      font-weight: bold;
      color: white;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    .btn-main:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.25);
    }
    .btn-calc { background: linear-gradient(135deg, #1b5e20, #2e7d32); }
    .btn-save { background: linear-gradient(135deg, #0277bd, #0288d1); }
    .btn-reset { background: linear-gradient(135deg, #c62828, #d32f2f); }

    #result {
      display: none;
      margin-top: 25px;
      padding: 20px;
      background: linear-gradient(135deg, #fff, #f8f9fa);
      border: 3px solid #1b5e20;
      border-radius: 15px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
    }
    #result h3 {
      color: #1b5e20;
      margin-bottom: 15px;
      text-align: center;
    }
    .stat-row {
      display: flex;
      justify-content: space-between;
      padding: 10px 0;
      border-bottom: 2px dashed #e0e0e0;
      font-size: 14px;
      font-weight: 500;
    }
    .stat-row:last-of-type {
      border-bottom: none;
    }
    #totalGross {
      color: #c62828;
      font-size: 1.4em;
      font-weight: bold;
    }
    .copy-btn {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #0277bd, #0288d1);
      color: white;
      border: none;
      border-radius: 12px;
      margin-top: 15px;
      font-weight: bold;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    .copy-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(2,119,189,0.3);
    }

    .rounds-block {
      margin-top: 25px;
    }
    .rounds-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .rounds-header h3 {
      color: #1b5e20;
      margin: 0;
    }
    .rounds-list {
      max-height: 250px;
      overflow-y: auto;
      border-radius: 12px;
      background: linear-gradient(135deg, #f5f7f8, #e8eaf6);
      padding: 10px;
      box-shadow: inset 0 2px 8px rgba(0,0,0,0.1);
    }
    .round-item {
      background: linear-gradient(135deg, #fff, #f8f9fa);
      border-radius: 12px;
      padding: 12px;
      margin-bottom: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      transition: all 0.2s ease;
    }
    .round-item:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 15px rgba(0,0,0,0.12);
    }
    .round-item:last-child {
      margin-bottom: 0;
    }
    .round-item-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 8px;
    }
    .round-name {
      font-weight: 700;
      color: #1b5e20;
      font-size: 15px;
    }
    .round-meta {
      font-size: 12px;
      color: #666;
      line-height: 1.3;
    }
    .round-actions {
      display: flex;
      gap: 8px;
    }
    .round-btn {
      flex: 1;
      padding: 8px 12px;
      border-radius: 20px;
      border: none;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .round-btn-view {
      background: linear-gradient(135deg, #1b5e20, #2e7d32);
      color: #fff;
    }
    .round-btn-view:hover {
      background: linear-gradient(135deg, #2e7d32, #388e3c);
      transform: scale(1.02);
    }
    .round-btn-del {
      background: linear-gradient(135deg, #c62828, #d32f2f);
      color: #fff;
    }
    .round-btn-del:hover {
      background: linear-gradient(135deg, #d32f2f, #f44336);
      transform: scale(1.02);
    }

    @media (max-width: 600px) {
      .card {
        margin: 5px;
        padding: 12px;
      }
      .top-row {
        flex-direction: column;
      }
      .top-row input, .top-row select {
        width: 100%;
      }
      table {
        font-size: 12px;
      }
      th, td {
        padding: 6px 2px;
      }
      .btn-par {
        width: 35px;
        padding: 6px;
      }
      .btn-fir, .btn-gir {
        width: 40px;
        min-height: 35px;
        font-size: 14px;
      }
      .input-num {
        width: 40px;
        padding: 6px 2px;
      }
    }

    .table-wrapper {
      overflow-x: auto;
      margin: 15px 0;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    .empty-state {
      text-align: center;
      color: #777;
      padding: 20px;
      font-style: italic;
    }
  </style>
</head>
<body>

<div class="card">
  <h2>Golf Pro Tracker üèåÔ∏è‚Äç‚ôÇÔ∏è</h2>

  <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≠‡∏ö -->
  <div class="top-row">
    <input id="courseName" type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ô‡∏≤‡∏° / ‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏ö">
    <input id="roundDate" type="date">
    <select id="totalHoles">
      <option value="9">9 ‡∏´‡∏•‡∏∏‡∏°</option>
      <option value="18" selected>18 ‡∏´‡∏•‡∏∏‡∏°</option>
    </select>
  </div>

  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>Hole</th>
          <th>Par</th>
          <th>FIR</th>
          <th>Stroke</th>
          <th>GIR</th>
          <th>Putt</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>

  <div class="action-btns">
    <button class="btn-main btn-calc" onclick="calculateStats()">üìä ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</button>
    <button class="btn-main btn-save" onclick="saveRound()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≠‡∏ö</button>
    <button class="btn-main btn-reset" onclick="resetCurrent()">üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
  </div>

  <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏ö + ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ -->
  <div class="rounds-block">
    <div class="rounds-header">
      <h3>üìà ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤</h3>
      <small style="color:#666;">‡∏Å‡∏î‡∏£‡∏≠‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</small>
    </div>
    <div class="rounds-list" id="roundsList"></div>
  </div>

  <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å -->
  <div id="result">
    <h3 id="resultTitle">üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≠‡∏•‡πå‡∏ü</h3>
    <div class="stat-row">
      <b>üèåÔ∏è Gross Score:</b> <b id="totalGross"></b>
    </div>
    <div class="stat-row">
      <span>üéØ Fairway Hit:</span> <span id="fwPct"></span>
    </div>
    <div class="stat-row">
      <span>üìç Miss Direction:</span> <span id="missDetails"></span>
    </div>
    <div class="stat-row">
      <span>üü¢ Green in Regulation:</span> <span id="girPct"></span>
    </div>
    <div class="stat-row">
      <span>‚õ≥ Total Putts:</span> <span id="totalPutts"></span>
    </div>
    <button class="copy-btn" onclick="copyToClipboard()">üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ú‡∏•‡∏™‡πà‡∏á AI</button>
  </div>
</div>

<script>
  // === Service Worker Registration ===
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('sw.js')
        .then(registration => console.log('SW registered'))
        .catch(error => console.log('SW registration failed'));
    });
  }

  // === Storage Keys ===
  const CURRENT_KEY = 'golf_current_v2';
  const ROUNDS_KEY = 'golf_rounds_v2';

  // === Toggle States ===
  const FIR_STATES = ['', '‚úÖ', '‚¨ÖÔ∏è', '‚û°Ô∏è', '‚ùå'];  // ‡∏ß‡πà‡∏≤‡∏á, ‡∏ñ‡∏π‡∏Å, ‡∏ã‡πâ‡∏≤‡∏¢, ‡∏Ç‡∏ß‡∏≤, ‡∏û‡∏•‡∏≤‡∏î
  const GIR_STATES = ['', '‚ùå', '‚úÖ'];  // ‡∏ß‡πà‡∏≤‡∏á, ‡∏ú‡∏¥‡∏î, ‡∏ñ‡∏π‡∏Å

  // === Build Table ===
  function buildTable(holes) {
    const tbody = document.getElementById('tableBody');
    tbody.innerHTML = '';
    for (let i = 1; i <= holes; i++) {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td><b>${i}</b></td>
        <td><button class="btn-par" data-hole="${i}" onclick="togglePar(this)">3</button></td>
        <td class="fir-cell">-</td>
        <td><input type="number" class="input-num stroke-val" data-hole="${i}" placeholder="-" min="1" max="15" onchange="saveCurrent()"></td>
        <td><button class="btn-gir" data-hole="${i}" onclick="toggleGir(this)">-</button></td>
        <td><input type="number" class="input-num putt-val" data-hole="${i}" placeholder="-" min="0" max="10" onchange="saveCurrent()"></td>
      `;
      tbody.appendChild(tr);
    }
    updateFirCells();
  }

  function updateFirCells() {
    document.querySelectorAll('#tableBody tr').forEach(tr => {
      const parBtn = tr.querySelector('.btn-par');
      const par = parseInt(parBtn.innerText);
      const firCell = tr.querySelector('.fir-cell');
      const hole = parBtn.dataset.hole;
      
      if (par === 3) {
        firCell.innerHTML = '-';
      } else {
        if (!firCell.querySelector('.btn-fir')) {
          firCell.innerHTML = `<button class="btn-fir" data-hole="${hole}" onclick="toggleFir(this)"></button>`;
        }
      }
    });
  }

  // === Toggle Functions ===
  function togglePar(btn) {
    let n = parseInt(btn.innerText);
    n = n >= 6 ? 3 : n + 1;
    btn.innerText = n;
    updateFirCells();
    saveCurrent();
  }

  function toggleFir(btn) {
    let current = btn.innerText || '';
    let idx = FIR_STATES.indexOf(current);
    const next = FIR_STATES[(idx + 1) % FIR_STATES.length];
    btn.innerText = next;
    saveCurrent();
  }

  function toggleGir(btn) {
    let current = btn.innerText === '-' ? '' : btn.innerText;
    let idx = GIR_STATES.indexOf(current);
    const next = GIR_STATES[(idx + 1) % GIR_STATES.length];
    btn.innerText = next || '-';
    saveCurrent();
  }

  // === Data Management ===
  function collectCurrentRoundData() {
    const name = document.getElementById('courseName').value.trim();
    const date = document.getElementById('roundDate').value;
    const holes = parseInt(document.getElementById('totalHoles').value);

    const holeData = {};
    document.querySelectorAll('#tableBody tr').forEach((tr, index) => {
      const i = index + 1;
      const par = parseInt(tr.querySelector('.btn-par').innerText);
      const firBtn = tr.querySelector('.btn-fir');
      const girBtn = tr.querySelector('.btn-gir');
      const stroke = tr.querySelector('.stroke-val').value;
      const putt = tr.querySelector('.putt-val').value;

      holeData[i] = {
        par: par,
        fir: firBtn ? (firBtn.innerText || '') : '',
        gir: girBtn ? (girBtn.innerText === '-' ? '' : girBtn.innerText) : '',
        stroke: stroke,
        putt: putt
      };
    });

    return {
      name: name || '‡∏£‡∏≠‡∏ö‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠',
      date: date || new Date().toISOString().slice(0, 10),
      holes,
      holeData
    };
  }

  function saveCurrent() {
    const round = collectCurrentRoundData();
    localStorage.setItem(CURRENT_KEY, JSON.stringify(round));
  }

  function loadCurrent() {
    const saved = localStorage.getItem(CURRENT_KEY);
    if (!saved) return;
    
    try {
      const round = JSON.parse(saved);
      document.getElementById('courseName').value = round.name !== '‡∏£‡∏≠‡∏ö‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠' ? round.name : '';
      document.getElementById('roundDate').value = round.date || new Date().toISOString().slice(0, 10);
      document.getElementById('totalHoles').value = round.holes || 18;

      buildTable(round.holes || 18);

      Object.entries(round.holeData || {}).forEach(([hole, h]) => {
        const tr = document.querySelector(`#tableBody tr:nth-child(${hole})`);
        if (!tr) return;
        
        const parBtn = tr.querySelector('.btn-par');
        const strokeInput = tr.querySelector('.stroke-val');
        const puttInput = tr.querySelector('.putt-val');

        if (parBtn && h.par != null) parBtn.innerText = h.par;
        updateFirCells();
        
        const firBtn = tr.querySelector('.btn-fir');
        if (firBtn && h.fir) firBtn.innerText = h.fir;
        
        const girBtn = tr.querySelector('.btn-gir');
        if (girBtn && h.gir != null) girBtn.innerText = h.gir || '-';
        
        if (strokeInput) strokeInput.value = h.stroke || '';
        if (puttInput) puttInput.value = h.putt || '';
      });
    } catch(e) {
      console.error('loadCurrent error', e);
    }
  }

  // === Round Management ===
  function saveRound() {
    const round = collectCurrentRoundData();
    const rounds = JSON.parse(localStorage.getItem(ROUNDS_KEY) || '[]');
    
    const fullRound = {
      id: Date.now(),
      ...round,
      createdAt: new Date().toISOString()
    };
    
    rounds.unshift(fullRound);
    if (rounds.length > 100) rounds.pop();
    
    localStorage.setItem(ROUNDS_KEY, JSON.stringify(rounds));
    localStorage.setItem(CURRENT_KEY, JSON.stringify(fullRound));
    
    loadRoundsList();
    alert('üéâ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≠‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢');
  }

  function loadRoundsList() {
    const rounds = JSON.parse(localStorage.getItem(ROUNDS_KEY) || '[]');
    const container = document.getElementById('roundsList');
    
    if (!rounds.length) {
      container.innerHTML = '<div class="empty-state">üìã ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</div>';
      return;
    }
    
    container.innerHTML = rounds.map(r => {
      const totalStroke = Object.values(r.holeData || {}).reduce((sum, h) => {
        return sum + (parseInt(h.stroke) || 0);
      }, 0);
      
      const totalPar = Object.values(r.holeData || {}).reduce((sum, h) => {
        return sum + (parseInt(h.par) || 3);
      }, 0);
      
      const scoreToPar = totalStroke && totalPar ? totalStroke - totalPar : 0;
      const scoreText = scoreToPar === 0 ? 'E' : (scoreToPar > 0 ? `+${scoreToPar}` : `${scoreToPar}`);
      
      const dateLabel = r.date ? new Date(r.date).toLocaleDateString('th-TH') : '';
      
      return `
        <div class="round-item">
          <div class="round-item-top">
            <div>
              <div class="round-name">${r.name}</div>
              <div class="round-meta">
                üìÖ ${dateLabel} ‚Ä¢ üèåÔ∏è ${r.holes} ‡∏´‡∏•‡∏∏‡∏°<br>
                üéØ Gross: ${totalStroke || '-'} (${scoreText})
              </div>
            </div>
          </div>
          <div class="round-actions">
            <button class="round-btn round-btn-view" onclick="viewRoundStats(${r.id})">üìä ‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</button>
            <button class="round-btn round-btn-del" onclick="deleteRound(${r.id})">üóëÔ∏è ‡∏•‡∏ö</button>
          </div>
        </div>
      `;
    }).join('');
  }

  function deleteRound(id) {
    if (!confirm('üóëÔ∏è ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≠‡∏ö‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) return;
    
    const rounds = JSON.parse(localStorage.getItem(ROUNDS_KEY) || '[]');
    const filtered = rounds.filter(r => r.id !== id);
    localStorage.setItem(ROUNDS_KEY, JSON.stringify(filtered));
    loadRoundsList();
  }

  // === Statistics ===
  function viewRoundStats(id) {
    const rounds = JSON.parse(localStorage.getItem(ROUNDS_KEY) || '[]');
    const round = rounds.find(r => r.id === id);
    if (!round) return;
    
    const stats = calcStatsFromRound(round);
    renderStats(stats, round);
  }

  function calculateStats() {
    const round = collectCurrentRoundData();
    const stats = calcStatsFromRound(round);
    renderStats(stats, round);
  }

  function calcStatsFromRound(round) {
    let fwHits = 0, totalFw = 0, L = 0, R = 0, X = 0;
    let girCount = 0, putts = 0, gross = 0;

    Object.values(round.holeData || {}).forEach(h => {
      const par = parseInt(h.par) || 3;
      const stroke = parseInt(h.stroke) || 0;
      const putt = parseInt(h.putt) || 0;
      const fir = h.fir || '';
      const gir = h.gir || '';

      if (par > 3) {
        totalFw++;
        if (fir === '‚úÖ') fwHits++;
        else if (fir === '‚¨ÖÔ∏è') L++;
        else if (fir === '‚û°Ô∏è') R++;
        else if (fir === '‚ùå') X++;
      }

      if (gir === '‚úÖ') girCount++;
      putts += putt;
      gross += stroke;
    });

    const holes = round.holes || 18;
    const fwPct = totalFw > 0 ? Math.round(fwHits / totalFw * 100) : 0;
    const girPct = holes > 0 ? Math.round(girCount / holes * 100) : 0;

    return {
      gross,
      fwHits,
      totalFw,
      fwPct,
      L, R, X,
      girCount,
      girPct,
      putts,
      holes
    };
  }

  function renderStats(stats, round) {
    document.getElementById('resultTitle').innerText = 
      `üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≠‡∏•‡πå‡∏ü: ${round.name} (${round.date})`;
    document.getElementById('totalGross').innerText = stats.gross;
    document.getElementById('fwPct').innerText = 
      `${stats.fwHits}/${stats.totalFw} (${stats.fwPct}%)`;
    document.getElementById('missDetails').innerText = 
      `‚¨ÖÔ∏è${stats.L} | ‚û°Ô∏è${stats.R} | ‚ùå${stats.X}`;
    document.getElementById('girPct').innerText = 
      `${stats.girCount}/${stats.holes} (${stats.girPct}%)`;
    document.getElementById('totalPutts').innerText = stats.putts;

    document.getElementById('result').style.display = 'block';
    document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
  }

  // === Utility Functions ===
  function copyToClipboard() {
    const gross = document.getElementById('totalGross').innerText;
    const fw = document.getElementById('fwPct').innerText;
    const miss = document.getElementById('missDetails').innerText;
    const gir = document.getElementById('girPct').innerText;
    const putt = document.getElementById('totalPutts').innerText;
    
    const text = `üèåÔ∏è Golf Round Summary:
üìä Gross Score: ${gross}
üéØ Fairway Hit: ${fw}
üìç Miss Direction: ${miss}
üü¢ GIR: ${gir}
‚õ≥ Total Putts: ${putt}

Generated by Golf Pro Tracker üèåÔ∏è‚Äç‚ôÇÔ∏è`;

    navigator.clipboard.writeText(text).then(() => {
      alert('üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ AI ‡πÅ‡∏•‡πâ‡∏ß');
    }).catch(() => {
      prompt('üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ:', text);
    });
  }

  function resetCurrent() {
    if (!confirm('üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≠‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?')) return;
    
    localStorage.removeItem(CURRENT_KEY);
    document.getElementById('courseName').value = '';
    document.getElementById('roundDate').value = new Date().toISOString().slice(0,10);
    document.getElementById('totalHoles').value = 18;
    buildTable(18);
    document.getElementById('result').style.display = 'none';
  }

  // === Event Listeners ===
  document.getElementById('totalHoles').addEventListener('change', () => {
    const holes = parseInt(document.getElementById('totalHoles').value);
    buildTable(holes);
    saveCurrent();
  });

  document.getElementById('courseName').addEventListener('input', saveCurrent);
  document.getElementById('roundDate').addEventListener('change', saveCurrent);

  // === Initialize App ===
  (function init() {
    document.getElementById('roundDate').value = new Date().toISOString().slice(0,10);
    buildTable(parseInt(document.getElementById('totalHoles').value));
    loadCurrent();
    loadRoundsList();
  })();
</script>

</body>
</html>

							<script>
                            	const CACHE_NAME = 'golf-pro-tracker-v2.1';
const urlsToCache = [
  './',
  './index.html',
  './manifest.json',
  'https://cdn-icons-png.flaticon.com/192/1099/1099680.png',
  'https://cdn-icons-png.flaticon.com/512/1099/1099680.png'
];

// Install Event
self.addEventListener('install', event => {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then(cache => {
        console.log('Opened cache');
        return cache.addAll(urlsToCache);
      })
  );
});

// Fetch Event
self.addEventListener('fetch', event => {
  event.respondWith(
    caches.match(event.request)
      .then(response => {
        // Return cached version or fetch from network
        return response || fetch(event.request);
      }
    )
  );
});

// Activate Event
self.addEventListener('activate', event => {
  event.waitUntil(
    caches.keys().then(cacheNames => {
      return Promise.all(
        cacheNames.map(cacheName => {
          if (cacheName !== CACHE_NAME) {
            console.log('Deleting old cache:', cacheName);
            return caches.delete(cacheName);
          }
        })
      );
    })
  );
});
							</script>
                        </body>
                        </html>
                    