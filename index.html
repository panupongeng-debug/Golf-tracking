<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>Golf Pro Tracker</title>
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1099/1099680.png">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/1099/1099680.png">
    
    <style>
        body { font-family: -apple-system, sans-serif; padding: 10px; background: #eef2f3; color: #333; margin: 0; }
        .card { background: white; padding: 15px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); max-width: 600px; margin: auto; }
        h2 { text-align: center; color: #1b5e20; margin-top: 5px; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; background: white; font-size: 14px; }
        th { background: #1b5e20; color: white; padding: 10px 2px; position: sticky; top: 0; }
        td { border-bottom: 1px solid #eee; padding: 8px 2px; text-align: center; }
        .btn-par { background: #f1f8e9; border: 1px solid #1b5e20; border-radius: 4px; padding: 5px; width: 35px; cursor: pointer; }
        .btn-fir { background: #fff; border: 1px solid #ccc; border-radius: 4px; padding: 5px; width: 45px; font-size: 16px; min-height: 35px; cursor: pointer; }
        .input-num { width: 38px; padding: 6px 2px; text-align: center; border: 1px solid #ccc; border-radius: 4px; font-size: 14px; }
        .action-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        .calc-btn { padding: 15px; background: #1b5e20; color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; }
        .reset-btn { padding: 15px; background: #c62828; color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; }
        #result { display: none; margin-top: 20px; padding: 15px; background: #fff; border: 2px solid #1b5e20; border-radius: 12px; }
        .stat-row { display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px dashed #ccc; }
        .copy-btn { width: 100%; padding: 12px; background: #0277bd; color: white; border: none; border-radius: 10px; margin-top: 10px; cursor: pointer; }
    </style>
</head>
<body>

<div class="card">
    <h2>Golf Pro Tracker üèåÔ∏è‚Äç‚ôÇÔ∏è</h2>
    <table>
        <thead>
            <tr>
                <th>Hole</th>
                <th>Par</th>
                <th>FIR</th>
                <th>Stroke</th>
                <th>GIR</th>
                <th>Putt</th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>

    <div class="action-btns">
        <button class="calc-btn" onclick="calculateStats()">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ú‡∏•</button>
        <button class="reset-btn" onclick="resetAll()">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
    </div>

    <div id="result">
        <h3>‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≠‡∏•‡πå‡∏ü:</h3>
        <div class="stat-row"><b>Gross Score:</b> <b id="totalGross" style="color:red"></b></div>
        <div class="stat-row"><span>Fairway Hit:</span> <span id="fwPct"></span></div>
        <div class="stat-row"><span>Miss L/R/‚ùå:</span> <span id="missDetails"></span></div>
        <div class="stat-row"><span>GIR:</span> <span id="girPct"></span></div>
        <div class="stat-row"><span>Total Putts:</span> <span id="totalPutts"></span></div>
        <button class="copy-btn" onclick="copyToClipboard()">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ú‡∏•‡∏™‡πà‡∏á AI</button>
    </div>
</div>

<script>
    const firOptions = ['', '‚úÖ', '‚¨ÖÔ∏è', '‚û°Ô∏è', '‚ùå'];
    const storageKey = 'golf_stats_v6';

    function init() {
        const tbody = document.getElementById('tableBody');
        const savedData = JSON.parse(localStorage.getItem(storageKey)) || {};
        for (let i = 1; i <= 18; i++) {
            const data = savedData[i] || { par: 3, fir: '', stroke: '', gir: false, putt: '' };
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td><b>${i}</b></td>
                <td><button class="btn-par" onclick="togglePar(this)">${data.par}</button></td>
                <td class="fir-cell">${data.par == 3 ? '-' : `<button class="btn-fir" onclick="toggleFir(this)">${data.fir}</button>`}</td>
                <td><input type="number" class="input-num stroke-val" value="${data.stroke}" placeholder="-" onchange="saveData()"></td>
                <td><input type="checkbox" class="chk-gir" ${data.gir ? 'checked' : ''} onchange="saveData()" style="transform:scale(1.3)"></td>
                <td><input type="number" class="input-num putt-val" value="${data.putt}" placeholder="-" onchange="saveData()"></td>
            `;
            tbody.appendChild(tr);
        }
    }

    function togglePar(btn) {
        let n = parseInt(btn.innerText);
        let next = n >= 6 ? 3 : n + 1;
        btn.innerText = next;
        const cell = btn.closest('tr').querySelector('.fir-cell');
        cell.innerHTML = next === 3 ? '-' : `<button class="btn-fir" onclick="toggleFir(this)"></button>`;
        saveData();
    }

    function toggleFir(btn) {
        let idx = firOptions.indexOf(btn.innerText);
        btn.innerText = firOptions[(idx + 1) % firOptions.length];
        saveData();
    }

    function saveData() {
        const data = {};
        document.querySelectorAll('#tableBody tr').forEach((tr, i) => {
            const par = parseInt(tr.querySelector('.btn-par').innerText);
            const firBtn = tr.querySelector('.btn-fir');
            data[i+1] = {
                par: par,
                fir: firBtn ? firBtn.innerText : '-',
                stroke: tr.querySelector('.stroke-val').value,
                gir: tr.querySelector('.chk-gir').checked,
                putt: tr.querySelector('.putt-val').value
            };
        });
        localStorage.setItem(storageKey, JSON.stringify(data));
    }

    function calculateStats() {
        let fwHits = 0, totalFw = 0, L = 0, R = 0, X = 0, gir = 0, putts = 0, gross = 0;
        document.querySelectorAll('#tableBody tr').forEach(tr => {
            const par = parseInt(tr.querySelector('.btn-par').innerText);
            const firBtn = tr.querySelector('.btn-fir');
            const s = parseInt(tr.querySelector('.stroke-val').value) || 0;
            const p = parseInt(tr.querySelector('.putt-val').value) || 0;
            if (par > 3 && firBtn) {
                totalFw++;
                if (firBtn.innerText === '‚úÖ') fwHits++;
                else if (firBtn.innerText === '‚¨ÖÔ∏è') L++;
                else if (firBtn.innerText === '‚û°Ô∏è') R++;
                else if (firBtn.innerText === '‚ùå') X++;
            }
            if (tr.querySelector('.chk-gir').checked) gir++;
            putts += p; gross += s;
        });
        document.getElementById('totalGross').innerText = gross;
        document.getElementById('fwPct').innerText = `${fwHits}/${totalFw} (${totalFw>0?Math.round(fwHits/totalFw*100):0}%)`;
        document.getElementById('missDetails').innerText = `‚¨ÖÔ∏è${L} | ‚û°Ô∏è${R} | ‚ùå${X}`;
        document.getElementById('girPct').innerText = `${gir}/18 (${Math.round(gir/18*100)}%)`;
        document.getElementById('totalPutts').innerText = putts;
        document.getElementById('result').style.display = 'block';
    }

    function copyToClipboard() {
        const text = `Gross: ${document.getElementById('totalGross').innerText}\nFW: ${document.getElementById('fwPct').innerText}\nMiss: ${document.getElementById('missDetails').innerText}\nGIR: ${document.getElementById('girPct').innerText}\nPutts: ${document.getElementById('totalPutts').innerText}`;
        navigator.clipboard.writeText(text).then(() => alert('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß!'));
    }

    function resetAll() { if(confirm('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï?')) { localStorage.removeItem(storageKey); location.reload(); } }
    init();
</script>
</body>
</html>
